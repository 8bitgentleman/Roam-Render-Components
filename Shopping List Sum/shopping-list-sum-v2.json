[{"create-time":1629371007672,"title":"roam/render",":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"children":[{"edit-time":1645895729311,"children":[{"string":"**Author**","create-time":1645895706873,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"children":[{"string":"Me, [[Matt Vogel]]","create-time":1645895706873,":block/refs":[{":block/uid":"0Rcdlx-xW"}],"refs":[{"uid":"0Rcdlx-xW"}],":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"uid":"qNTd6lHkJ","edit-time":1645895706873,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"Twitter:: [@todayIwasbetter](https://twitter.com/todayIwasbetter)","create-time":1645895706873,":block/refs":[{":block/uid":"A_V6-tfMu"}],"refs":[{"uid":"A_V6-tfMu"}],":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"uid":"idKGz-F2T","edit-time":1645895706873,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"How Best To Contact Me:: Twitter is best, Roam Slack is also good","create-time":1645895706873,":block/refs":[{":block/uid":"US1dWUALf"}],"refs":[{"uid":"US1dWUALf"}],":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"uid":"bvFu8APW1","edit-time":1645895706873,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"This code is open source! If you have ideas for improvements or run into a bug feel free to fork it or report it over on the [Github repo](https://github.com/8bitgentleman/Roam-Render-Components)","uid":"wYqbf0KI2","create-time":1645895706873,"edit-time":1645895706873,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"uid":"s4ZdElW2l","edit-time":1645895706873,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"**About Component**","create-time":1645895706873,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"children":[{"string":"searches all block children for prices in USD (eg. $10) and sums everything up","uid":"3W0yF6uFh","create-time":1645895706873,"edit-time":1645897138416,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"uid":"hPjtoIvMs","edit-time":1645895706873,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"edit-time":1645896058179,"children":[{"string":"{{[[roam/render]]:((cZkDibg97))}}","create-time":1645895706873,":block/refs":[{":block/uid":"VK3JN0EgW"},{":block/uid":"cZkDibg97"}],"refs":[{"uid":"VK3JN0EgW"},{"uid":"cZkDibg97"}],":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"uid":"uzVTFODFw","edit-time":1645895706873,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"refs":[{"uid":"ijFx9XSFA"}],"uid":"htqrMrXYD",":block/refs":[{":block/uid":"ijFx9XSFA"}],"string":"Shopping list sum price v2 [[roam/templates]]",":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"create-time":1645895706873,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"code","create-time":1645895706873,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"children":[{"string":"```clojure\n(ns shopping-sum-v2\n  (:require\n   [reagent.core :as r]\n   [datascript.core :as d]\n   [roam.datascript.reactive :as dr]\n   [clojure.pprint :as pp]))```","uid":"LGmKbS0XE","create-time":1645895706873,"edit-time":1645895758860,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"```clojure\n\n\n(defn flatten-block \n  \"Flattens a blocks children into a flat list\"\n  [acc block]\n  (reduce flatten-block\n          (conj acc (dissoc block :block/children))\n          (:block/children block)))\n\n(defn find-child-refs\n  \"Returns all _refs for children blocks given a parent block uid\"\n  [block-uid]\n  (flatten-block []\n             @(dr/q '[:find (pull ?e [:block/string :block/uid {:block/children ...}]) .\n                      :in $ ?uid\n                      :where\n                      [?e :block/uid ?uid]\n                      ]\n                    block-uid)))\n\n(defn filter-content [content]\n  \"finds blocks that contain a price eg. $40. Not acutally used just useful\"\n  (map \n   \t#(re-seq #\".*\\$(\\d+)(?:\\.\\d+)?\" (:block/string %))\n    (filter #(re-seq #\".*\\$(\\d+)(?:\\.\\d+)?\" (:block/string %)) content))\n\t\n\n  )\n\n```","uid":"tY3MRwc24","create-time":1645895706873,"edit-time":1645895764985,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"```clojure\n(def log (.-log js/console))\n\n(defn sum-string [content]\n  (->> content\n    (re-seq #\"\\$\\d+(?:\\.\\d+)?\" )\n    (map #(subs % 1) )\n    (map int )\n    (reduce +)\n    )\n  )\n\n(defn main [{:keys [block-uid]} & args]\n  [:div.rm-shopping-sum {:style{:margin-left \"10px\"}} \"Total Spent: \" \n   [:div.rm-shopping-sum-amount {:style{\n                 :display \"inline-block\"\n                \n                }}\n    \"$\"(reduce + (map #(sum-string (:block/string %)) (find-child-refs block-uid)))\n    ]\n     \t\n     ]\n  )\n```","uid":"cZkDibg97","create-time":1645895706873,"edit-time":1645895891763,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"uid":"tQz7X1W9W","edit-time":1645895706873,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"CSS (Optional)","create-time":1645895706873,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"children":[{"string":"__ Move these CSS codeblocks to your __[[roam/css]]__ page__","create-time":1645895706873,":block/refs":[{":block/uid":"xX3DhaC1m"}],"refs":[{"uid":"xX3DhaC1m"}],":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"uid":"l2byC1s_n","edit-time":1645895706873,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"Component Styling","create-time":1645895706873,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"children":[{"string":"```css\n.rm-shopping-sum{\n  \n}\n.rm-shopping-sum-amount{\n  border: 2px solid #CD3838;\n  padding: 2px 4px;\n  color: #CD3838;\n  font-weight: bold;\n}\n\n```","uid":"xYcotyOPh","create-time":1645895706873,"edit-time":1645895999731,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"uid":"UDOEY9Ww9","edit-time":1645895706873,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"uid":"gCo2VD1lw","edit-time":1645895706873,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"refs":[{"uid":"08-30-2021"}],"uid":"LAeJe085V",":block/refs":[{":block/uid":"08-30-2021"}],"string":"Shopping list sum price v2 [[August 30th, 2021]]",":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"create-time":1645895704829,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"uid":"VK3JN0EgW","edit-time":1629371007672,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}]