[{"create-time":1619702918387,"title":"roam/render",":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"children":[{"edit-time":1620922707338,"children":[{"string":"**Author**","create-time":1620922714364,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"children":[{"string":"Matt Vogel","create-time":1620922725371,"uid":"vlWNPvnU9","edit-time":1620922728624,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"Twitter:: [@todayIwasbetter](https://twitter.com/todayIwasbetter)","create-time":1620922732396,":block/refs":[{":block/uid":"7Onzp6PaL"}],"refs":[{"uid":"7Onzp6PaL"}],":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"uid":"RXxf1LqmA","edit-time":1620922733749,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"How Best To Contact Me:: Roam Slack, Twitter and my are good","create-time":1620922736477,":block/refs":[{":block/uid":"kK8ezxt2Y"}],"refs":[{"uid":"kK8ezxt2Y"}],":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"uid":"AN3D5l5Fv","edit-time":1620922738034,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"This code is open source! If you have ideas for improvements or run into a bug feel free to fork it or report it over on the [Github repo](https://github.com/8bitgentleman/Roam-Render-Components)","create-time":1620922741532,"uid":"rkHq00aMY","edit-time":1620922742091,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"uid":"kJCfB3DrE","edit-time":1620922724271,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"edit-time":1620922771889,"children":[{"string":"{{[[roam/render]]: ((Q6VO5NPYU)) }}","create-time":1620922903632,":block/refs":[{":block/uid":"tICCuVAmm"},{":block/uid":"Q6VO5NPYU"}],"refs":[{"uid":"tICCuVAmm"},{"uid":"Q6VO5NPYU"}],":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"uid":"uTI9dpzsX","edit-time":1620922908019,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"refs":[{"uid":"sst_EWLEn"}],"uid":"wD7Df1DOb",":block/refs":[{":block/uid":"sst_EWLEn"}],"string":"Roam Stopwatch [[roam/templates]]",":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"create-time":1620922763980,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"code","create-time":1620923018386,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"children":[{"string":"```clojure\n(ns roam-stopwatch-v2\n  (:require\n   [reagent.core :as r]\n   [datascript.core :as d]\n   [roam.datascript.reactive :as dr]\n   [roam.block :as block]))\n\n\n(def increase-time #(let [elapsed-time (inc (:elapsed-time %))] (assoc % :elapsed-time elapsed-time)))\n\n(defn seconds-to-time\n \"Converts stopwatch time in seconds to hours:minutes:seconds\"\n [secs]\n (let [d (js/Date. (* secs 1000))]\n   {:hours   (.getUTCHours d)\n    :minutes (.getUTCMinutes d)\n    :seconds (.getUTCSeconds d)}\n   )\n )\n\n(defn display-time\n \"Pretty-prints hours:minutes:seconds, given time map of the form {:hours x :seconds y}.\"\n [tm]\n (let [pad (fn [n]\n             (if (< n 10)\n               (str \"0\" n)\n               n))\n       hh (pad (:hours tm))\n       mm (pad (:minutes tm))\n       ss (pad (:seconds tm))]\n   ;;    (str mm \":\" ss) <-- if you were to actually use this to update the DOM\n   (str hh \":\" mm \":\" ss)))\n\n\n(defn find-child-count\n \"Counts direct children blocks given a parent block uid\"\n [block-uid]\n           (or @(dr/q '[ :find (count ?c) .\n                        :in $ ?parentuid\n\t\t\t\t\t\t :where\n\t\t\t\t\t\t\t\t[?e :block/uid ?parentuid]\n\t\t\t\t\t\t\t\t[?e :block/children ?c]]\n                   block-uid) 0)\n )\n\n\n(defn main [{:keys [block-uid]} & args]\n (let [time-data (r/atom {:elapsed-time 0 })]\n\n   (def interval (js/setInterval #(swap! time-data increase-time) 1000))\n   (def time (seconds-to-time (get-in @time-data [:elapsed-time])))\n   (fn []\n  \t\t(def time (seconds-to-time (get-in @time-data [:elapsed-time])))\n\n      [:div {:style {:display \"inline-block\"\n\t\t\t\t\t          :align-items \"left\"}\n             :class \"roam-stopwatch\"}\n        [:button {:class \"bp3-button bp3-minimal bp3-icon-stopwatch\"\n                  :draggable false\n                  :style {:width \"100%\"\n                          :color \"#3871CD\"\n                          :border-radius \"3px\"\n                          :background \"#DBE4F6\"\n                          :border \"1px solid #3871CD\"}\n                  :on-click (fn []\n                              (block/create\n                                 {:location {:parent-uid block-uid\n                                             :order ( find-child-count block-uid)}\n                                  :block {:string (display-time time) }})\n                              (swap! time-data\n                                     (fn [data]\n                                       (-> data\n                                           (assoc :elapsed-time 0)))) )}\n         (or args \"Lap\")\": \" (display-time time) ]])))```","create-time":1620922988128,"uid":"Q6VO5NPYU","edit-time":1620922994237,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"uid":"KGy73mcMO","edit-time":1620923019743,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"CSS (optional)","create-time":1620922784636,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"children":[{"string":"Move codeblock to [[roam/css]]","create-time":1620922796942,":block/refs":[{":block/uid":"LT6P4I6DS"}],"refs":[{"uid":"LT6P4I6DS"}],":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"uid":"goZI_YTlB","edit-time":1620922817686,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}},{"string":"```css\n:root{\n  --stopwatch-primary: #3871CD;\n  --stopwatch-secondary: #DBE4F6;\n}\n\n.roam-stopwatch button{\n  color: var(--stopwatch-primary) !important;\n  background: var(--stopwatch-secondary) !important;\n  border: 1px solid var(--stopwatch-primary) !important;\n  border-radius:3px !important;\n}\n\n.roam-stopwatch .bp3-icon-stopwatch::before{\n  color:var(--stopwatch-primary);\n}```","create-time":1620922789853,"uid":"NovO6cd_t","edit-time":1620923052132,":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"uid":"w6E0rOIMq","edit-time":1620922789059,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"refs":[{"uid":"05-13-2021"}],"uid":"47W25OmHG",":block/refs":[{":block/uid":"05-13-2021"}],"string":"Roam Stopwatch -v2 [[May 13th, 2021]]",":create/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"},"create-time":1620922692000,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}],"uid":"tICCuVAmm","edit-time":1619702918387,":edit/user":{":user/uid":"rTvmoxu9FGSWal8SbCZiywCL2Nm1"}}]